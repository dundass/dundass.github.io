<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>plive // livecoding p5.js // dundass</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.14/p5.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.14/addons/p5.dom.js"></script>
    <script src="js/itera.js"></script>
    <link rel="stylesheet" href="css/plive.css"
  </head>

  <body>

  <script>

  // p5.disableFriendlyErrors = true;

  var date = new Date();
  var w = window.innerWidth;
  var h = window.innerHeight;
  var f = 0;
  var t = date.getMilliseconds() / 1000.0;

  var buffer = "";
  var inputBox;
  var ctrlenter = [false, false];

  function setup() {
    createCanvas(w, h);
    document.documentElement.style.overflow = 'hidden';
    background(0);
    // inputBox = createInput('');
    // var col = color(255, 255, 255, 140);
    // inputBox.style("background-color", col);
    // inputBox.position(30, 30);
    // inputBox.attribute("type", "text");
    // inputBox.attribute("autofocus", "autofocus");
    // inputBox.size(400);
    inputBox = document.getElementById("codearea");
  }

  function draw() {
    try {
      plive(buffer);
    } catch(err) {

    }
  }

  function keyPressed() {
    //console.log(key + " " + keyCode);
    if(keyCode === 17) ctrlenter[0] = true;
    else if(keyCode === 13) ctrlenter[1] = true;
    if(ctrlenter[0] && ctrlenter[1]) buffer = inputBox.value;
  }

  function keyReleased() {
    if(keyCode === 17) ctrlenter[0] = false;
    else if(keyCode === 13) ctrlenter[1] = false;
  }

  function plive(s) {
    f = frameCount;
    t = date.getMilliseconds() / 1000.0;
    eval(s);
  }

  </script>

  <textarea id="codearea" rows="20" cols="50">background(0);</textarea>

  </body>
</html>
